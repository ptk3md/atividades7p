<!DOCTYPE html>
<html lang="pt-BR" data-theme="dark">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Calendário de Atividades</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet"/>
<style>
  /* ─── VARIÁVEIS (THEMING) ─── */
  :root {
    /* Cores Base (Dark Mode Default) */
    --bg: #050505;
    --surface: #111111;
    --border: #27272a;
    --text-primary: #ffffff;
    --text-secondary: #a1a1aa;
    --text-tertiary: #52525b;
    --accent-ui: #ffffff; /* Cor de destaque da UI (botões ativos) */
    
    /* Cores Semânticas (Atividades) */
    --color-exam: #ef4444;    /* Vermelho */
    --color-final: #b91c1c;   /* Vermelho Escuro */
    --color-work: #f97316;    /* Laranja */
    --color-practice: #ea580c; /* Laranja Escuro */
    
    /* Configurações */
    --radius: 12px;
    --font: 'Inter', sans-serif;
    --shadow: 0 0 0 1px var(--border), 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    --transition: cubic-bezier(0.2, 0.8, 0.2, 1);
  }

  [data-theme="light"] {
    --bg: #ffffff;
    --surface: #f4f4f5;
    --border: #e4e4e7;
    --text-primary: #09090b;
    --text-secondary: #71717a;
    --text-tertiary: #a1a1aa;
    --accent-ui: #000000;
  }

  /* ─── RESET & BASE ─── */
  * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
  
  body {
    font-family: var(--font);
    background-color: var(--bg);
    color: var(--text-primary);
    min-height: 100vh;
    padding: 2rem 1rem;
    transition: background-color 0.4s ease, color 0.4s ease;
    overflow-y: scroll; /* Evita pulo do scrollbar */
  }

  .app-container { max-width: 680px; margin: 0 auto; }

  /* ─── HEADER & TOGGLE ─── */
  header { 
    display: flex; justify-content: space-between; align-items: flex-start; 
    margin-bottom: 2.5rem; position: relative;
  }
  
  .header-content h1 { 
    font-size: 1.75rem; font-weight: 900; letter-spacing: -0.03em; margin-bottom: 0.25rem;
  }
  .header-content p { 
    color: var(--text-secondary); font-size: 0.85rem; font-weight: 500; text-transform: uppercase; letter-spacing: 0.05em;
  }

  .theme-btn {
    background: transparent; border: 1px solid var(--border); color: var(--text-primary);
    width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center;
    cursor: pointer; transition: all 0.3s var(--transition);
  }
  .theme-btn:hover { background: var(--surface); transform: rotate(15deg); border-color: var(--text-secondary); }
  .theme-btn:active { transform: scale(0.9) rotate(15deg); }
  .theme-btn svg { width: 20px; height: 20px; fill: none; stroke: currentColor; stroke-width: 2; }

  /* ─── FILTERS AREA ─── */
  .controls-wrapper {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 1.5rem;
    margin-bottom: 2rem;
    box-shadow: var(--shadow);
    transition: background 0.3s ease, border-color 0.3s ease;
  }

  /* Search */
  .search-group { position: relative; margin-bottom: 1.25rem; }
  .search-group input {
    width: 100%; background: var(--bg); border: 1px solid var(--border);
    color: var(--text-primary); padding: 12px 12px 12px 40px; border-radius: 8px;
    font-family: var(--font); font-size: 0.9rem; transition: all 0.2s ease;
  }
  .search-group input:focus { 
    border-color: var(--text-primary); outline: none; 
    box-shadow: 0 0 0 3px rgba(125,125,125,0.1); 
  }
  .search-icon {
    position: absolute; left: 14px; top: 50%; transform: translateY(-50%);
    color: var(--text-tertiary); width: 16px; height: 16px; pointer-events: none;
    transition: color 0.2s;
  }
  .search-group input:focus + .search-icon { color: var(--text-primary); }

  /* Filter Chips */
  .filter-chips { display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 1.5rem; }
  .chip {
    background: transparent; border: 1px solid var(--border); color: var(--text-secondary);
    padding: 6px 14px; border-radius: 99px; font-size: 0.8rem; font-weight: 600;
    cursor: pointer; transition: all 0.2s var(--transition); user-select: none;
  }
  .chip:hover { border-color: var(--text-primary); color: var(--text-primary); }
  .chip.active {
    background: var(--accent-ui); color: var(--bg); border-color: var(--accent-ui);
    transform: scale(1.05); font-weight: 700;
  }
  .chip:active { transform: scale(0.95); }

  /* Slider Styling (Minimalist) */
  .slider-header { 
    display: flex; justify-content: space-between; font-size: 0.75rem; 
    font-weight: 700; text-transform: uppercase; color: var(--text-secondary); margin-bottom: 0.8rem; 
  }
  .slider-display { color: var(--text-primary); }
  
  .slider-track { position: relative; height: 4px; background: var(--border); border-radius: 99px; }
  .slider-fill { position: absolute; height: 100%; background: var(--text-primary); border-radius: 99px; z-index: 1; }
  .range-input {
    position: absolute; top: -8px; width: 100%; height: 20px;
    appearance: none; background: transparent; pointer-events: none; z-index: 2; margin: 0;
  }
  .range-input::-webkit-slider-thumb {
    appearance: none; pointer-events: all; width: 16px; height: 16px;
    background: var(--bg); border: 2px solid var(--text-primary); border-radius: 50%;
    cursor: pointer; transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
  }
  .range-input::-webkit-slider-thumb:hover { transform: scale(1.3); }

  /* ─── LISTA DE EVENTOS ─── */
  .events-grid { display: flex; flex-direction: column; gap: 0.75rem; }
  
  .event-card {
    display: flex; align-items: stretch;
    background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius);
    overflow: hidden; opacity: 0; transform: translateY(10px);
    transition: transform 0.3s var(--transition), box-shadow 0.3s ease, border-color 0.2s;
    cursor: default;
  }
  /* Animation Class added via JS */
  .event-card.visible { opacity: 1; transform: translateY(0); }
  
  .event-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    border-color: var(--text-secondary);
  }

  /* Date Badge (Left) */
  .card-date {
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    width: 70px; flex-shrink: 0; padding: 0 10px;
    background: rgba(0,0,0,0.02); border-right: 1px solid var(--border);
  }
  .card-date .day { font-size: 1.2rem; font-weight: 800; line-height: 1; }
  .card-date .month { font-size: 0.65rem; font-weight: 700; text-transform: uppercase; margin-top: 2px; opacity: 0.7; }

  /* Info (Center) */
  .card-info { flex: 1; padding: 14px 18px; display: flex; flex-direction: column; justify-content: center; }
  .card-title { font-weight: 700; font-size: 0.95rem; margin-bottom: 3px; color: var(--text-primary); }
  .card-disc { font-size: 0.75rem; color: var(--text-secondary); font-weight: 500; display: flex; align-items: center; gap: 6px; }

  /* Color Stripe (Right) */
  .card-stripe { width: 6px; flex-shrink: 0; }

  /* Tipos e Cores */
  .type-prova .card-date { color: var(--color-exam); }
  .type-prova .card-stripe { background: var(--color-exam); }

  .type-final .card-date { color: var(--color-final); }
  .type-final .card-stripe { background: var(--color-final); }
  
  .type-trabalho .card-date { color: var(--color-work); }
  .type-trabalho .card-stripe { background: var(--color-work); }

  .type-pratica .card-date { color: var(--color-practice); }
  .type-pratica .card-stripe { background: var(--color-practice); }

  /* Stats */
  .status-text {
    margin-top: 2rem; text-align: center; font-size: 0.8rem;
    color: var(--text-tertiary); opacity: 0.6;
  }

  .empty-msg { text-align: center; padding: 3rem; color: var(--text-secondary); font-size: 0.9rem; }

  /* Responsive */
  @media (max-width: 480px) {
    .header-content h1 { font-size: 1.5rem; }
    .card-date { width: 60px; }
  }
</style>
</head>
<body>

<div class="app-container">
  
  <header>
    <div class="header-content">
      <h1>Agenda Acadêmica</h1>
      <p id="semesterLabel">Semestre 2025.1</p>
    </div>
    <button class="theme-btn" id="themeToggle" aria-label="Alternar Tema">
      <svg id="iconSun" class="hidden" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
      <svg id="iconMoon" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
    </button>
  </header>

  <div class="controls-wrapper">
    <div class="search-group">
      <input type="text" id="searchInput" placeholder="Pesquisar matéria ou evento..." autocomplete="off">
      <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
    </div>

    <div class="filter-chips" id="discFilters"></div>

    <div class="slider-header">
      <span>Intervalo de Datas</span>
      <span class="slider-display" id="dateRangeLabel">...</span>
    </div>
    <div class="slider-track">
      <div class="slider-fill" id="rangeFill"></div>
      <input type="range" class="range-input" id="sliderMin" step="1">
      <input type="range" class="range-input" id="sliderMax" step="1">
    </div>
  </div>

  <div id="eventsList" class="events-grid"></div>
  
  <div class="status-text">
    <span id="countDisplay">0</span> atividades listadas
  </div>

</div>

<script>
/* ─── DADOS E CONFIGURAÇÃO ─── */
const CONFIG = {
  start: new Date(2025, 1, 1), // 01 Fev
  end:   new Date(2025, 5, 30), // 30 Jun
  data: [
    { d: "23/02", disc: "Ortopedia", title: "Seminário 1", type: "trabalho" },
    { d: "02/03", disc: "Ortopedia", title: "Seminário 2", type: "trabalho" },
    { d: "20/04", disc: "Ortopedia", title: "AVT1 — Avaliação Teórica", type: "prova" },
    { d: "30/03", disc: "Oftalmologia", title: "P1 — Multimídia", type: "trabalho" },
    { d: "27/04", disc: "Oftalmologia", title: "AVT1 — Teórica", type: "prova" },
    { d: "04/05", disc: "Oftalmologia", title: "Aula Prática", type: "pratica" },
    { d: "15/06", disc: "Oftalmologia", title: "P2 — Projeto Final", type: "final" },
    { d: "08/04", disc: "Clínica Médica", title: "AVE1 — Avaliação Escrita", type: "prova" },
    { d: "11/06", disc: "Clínica Médica", title: "AVE2 — Avaliação Escrita", type: "prova" },
    { d: "17/06", disc: "Clínica Médica", title: "AVP2 — Prova Prática", type: "final" },
    { d: "10/04", disc: "Ginecologia", title: "B1 — Hac GO", type: "pratica" },
    { d: "13/04", disc: "Ginecologia", title: "AV1", type: "prova" },
    { d: "22/06", disc: "Ginecologia", title: "AV2 Final", type: "final" },
    { d: "16/06", disc: "Pediatria", title: "OSCE", type: "prova" }
  ]
};

/* ─── LÓGICA DO APP ─── */
class CalendarApp {
  constructor() {
    this.events = [];
    this.totalDays = Math.ceil((CONFIG.end - CONFIG.start) / (86400000));
    
    this.state = {
      min: 0,
      max: this.totalDays,
      activeDisc: 'Todas',
      search: ''
    };

    this.ui = {
      list: document.getElementById('eventsList'),
      count: document.getElementById('countDisplay'),
      fill: document.getElementById('rangeFill'),
      rangeLabel: document.getElementById('dateRangeLabel'),
      minInput: document.getElementById('sliderMin'),
      maxInput: document.getElementById('sliderMax'),
      searchInput: document.getElementById('searchInput'),
      themeBtn: document.getElementById('themeToggle')
    };

    this.processData();
    this.initTheme();
    this.initControls();
    this.render();
  }

  processData() {
    // Ordena e formata datas
    this.events = CONFIG.data.map(ev => {
      const [d, m] = ev.d.split('/').map(Number);
      const dateObj = new Date(2025, m - 1, d);
      return { ...ev, dateObj, timestamp: dateObj.getTime() };
    }).sort((a, b) => a.timestamp - b.timestamp);
  }

  /* ─── THEME LOGIC ─── */
  initTheme() {
    const saved = localStorage.getItem('theme') || 'dark';
    document.documentElement.setAttribute('data-theme', saved);
    this.updateIcon(saved);

    this.ui.themeBtn.onclick = () => {
      const current = document.documentElement.getAttribute('data-theme');
      const next = current === 'dark' ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', next);
      localStorage.setItem('theme', next);
      this.updateIcon(next);
    };
  }

  updateIcon(theme) {
    const sun = document.getElementById('iconSun');
    const moon = document.getElementById('iconMoon');
    if (theme === 'dark') {
      sun.style.display = 'none';
      moon.style.display = 'block';
    } else {
      sun.style.display = 'block';
      moon.style.display = 'none';
    }
  }

  /* ─── CONTROLS LOGIC ─── */
  initControls() {
    // Filtros de Disciplina
    const discs = ['Todas', ...new Set(this.events.map(e => e.disc))];
    const discContainer = document.getElementById('discFilters');
    
    discs.forEach(d => {
      const btn = document.createElement('button');
      btn.className = `chip ${d === 'Todas' ? 'active' : ''}`;
      btn.textContent = d;
      btn.onclick = () => {
        this.state.activeDisc = d;
        document.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
        btn.classList.add('active');
        this.render();
      };
      discContainer.appendChild(btn);
    });

    // Slider
    this.ui.minInput.max = this.totalDays;
    this.ui.maxInput.max = this.totalDays;
    this.ui.minInput.value = 0;
    this.ui.maxInput.value = this.totalDays;

    const handleSlider = () => {
      let min = parseInt(this.ui.minInput.value);
      let max = parseInt(this.ui.maxInput.value);
      
      if (min > max - 1) {
        // Empurra o outro slider
        if (event.target === this.ui.minInput) this.ui.minInput.value = max - 1;
        else this.ui.maxInput.value = min + 1;
        min = parseInt(this.ui.minInput.value);
        max = parseInt(this.ui.maxInput.value);
      }
      this.state.min = min;
      this.state.max = max;
      this.updateSliderUI();
      this.render();
    };

    this.ui.minInput.addEventListener('input', handleSlider);
    this.ui.maxInput.addEventListener('input', handleSlider);

    // Search
    this.ui.searchInput.addEventListener('input', (e) => {
      this.state.search = e.target.value.toLowerCase();
      this.render();
    });

    this.updateSliderUI();
  }

  updateSliderUI() {
    const perMin = (this.state.min / this.totalDays) * 100;
    const perMax = (this.state.max / this.totalDays) * 100;
    this.ui.fill.style.left = perMin + '%';
    this.ui.fill.style.width = (perMax - perMin) + '%';
    
    const dStart = this.getDateFromOffset(this.state.min);
    const dEnd = this.getDateFromOffset(this.state.max);
    this.ui.rangeLabel.textContent = `${this.formatDate(dStart)} - ${this.formatDate(dEnd)}`;
  }

  /* ─── RENDER ─── */
  render() {
    const { min, max, activeDisc, search } = this.state;
    const startRange = this.getDateFromOffset(min);
    const endRange = this.getDateFromOffset(max);

    const filtered = this.events.filter(ev => {
      const inDate = ev.dateObj >= startRange && ev.dateObj <= endRange;
      const inDisc = activeDisc === 'Todas' || ev.disc === activeDisc;
      const inSearch = ev.title.toLowerCase().includes(search) || ev.disc.toLowerCase().includes(search);
      return inDate && inDisc && inSearch;
    });

    this.ui.list.innerHTML = '';
    
    if (filtered.length === 0) {
      this.ui.list.innerHTML = '<div class="empty-msg">Nenhuma atividade encontrada neste período.</div>';
      this.ui.count.textContent = 0;
      return;
    }

    filtered.forEach((ev, index) => {
      const card = document.createElement('div');
      card.className = `event-card type-${ev.type}`;
      // Stagger animation delay
      card.style.transitionDelay = `${index * 0.05}s`;
      
      const day = ev.dateObj.getDate().toString().padStart(2, '0');
      const month = ev.dateObj.toLocaleDateString('pt-BR', { month: 'short' }).replace('.','');

      card.innerHTML = `
        <div class="card-date">
          <span class="day">${day}</span>
          <span class="month">${month}</span>
        </div>
        <div class="card-info">
          <div class="card-title">${ev.title}</div>
          <div class="card-disc">${ev.disc}</div>
        </div>
        <div class="card-stripe"></div>
      `;
      
      this.ui.list.appendChild(card);
      
      // Trigger animation frame
      requestAnimationFrame(() => {
        card.classList.add('visible');
      });
    });

    this.ui.count.textContent = filtered.length;
  }

  /* ─── HELPERS ─── */
  getDateFromOffset(offset) {
    const d = new Date(CONFIG.start);
    d.setDate(d.getDate() + offset);
    return d;
  }
  
  formatDate(date) {
    return date.toLocaleDateString('pt-BR', { day: 'numeric', month: 'short' }).replace('.','');
  }
}

// Inicializar
document.addEventListener('DOMContentLoaded', () => {
  new CalendarApp();
});
</script>
</body>
</html>
